import{getCamerasList as _0x1,getCuratedRoutes as _0x2}from"./cameraData.js";import{cityFullNames as _0x3,regionCities as _0x4}from"./cityList.js";const _0xa=300,_0xb=80;let _0xc=[],_0xd=[],_0xe=[],_0xf=0,_0x10, _0x11="", _0x12="", _0x13="", _0x14="All";function _0x15(){_0x1().then(_0x16=>{_0xc=_0x16;_0xe=_0xc.slice();_0x17(_0xe);_0x18();_0x19();_0x1A();}).catch(_0x1B=>console.error("Error loading cameras:",_0x1B)),_0x2().then(_0x1C=>{_0xd=_0x1C;_0x1D();}).catch(_0x1E=>console.error("Error loading curated routes:",_0x1E));}function _0x15F(){const _0x20=document.querySelector(".header-controls"),_0x21=document.getElementById("imageGallery");_0x20&&( _0x20.classList.remove("hidden-on-load"),_0x20.classList.add("fade-in")),_0x21&&( _0x21.classList.remove("hidden-on-load"),_0x21.classList.add("fade-in"));}function _0x22(){const _0x23=document.getElementById("splashScreen");if(_0x23){_0x15F();_0x23.classList.add("fade-out"),_0x23.addEventListener("animationend",()=>{_0x23.style.display="none";});}}const _0x24=document.getElementById("imageGallery"),_0x25=document.getElementById("imageModal"),_0x26=_0x25.querySelector("img"),_0x27=document.querySelector(".modal-title"),_0x28=document.getElementById("cameraCount"),_0x29=document.getElementById("searchInput"),_0x2A=document.getElementById("cityFilterMenu"),_0x2B=document.getElementById("regionFilterMenu"),_0x2C=document.getElementById("routeFilterMenu"),_0x2D=document.getElementById("nearestButton"),_0x2E=document.getElementById("refreshButton"),_0x2F=document.getElementById("sizeSlider"),_0x30=document.getElementById("sizeControlButton"),_0x31=document.getElementById("sizeSliderContainer");const _0x32=document.getElementById("mapButton"),_0x33=document.getElementById("modalBody"),_0x34=document.getElementById("modalImageContainer");let _0x35=!1;if(_0x32){_0x32.addEventListener("click",()=>{if(!_0x35){const _0x36=_0x26.dataset.latitude,_0x37=_0x26.dataset.longitude; if(!_0x36||!_0x37){alert("No location data available for this camera.");return;}const _0x38=document.createElement("div");_0x38.id="modalMapContainer",_0x38.style.flex="1";const _0x39=document.createElement("iframe");_0x39.width="100%",_0x39.height="100%",_0x39.frameBorder="0",_0x39.style.border="0",_0x39.src=`https://maps.google.com/maps?q=${_0x36},${_0x37}&z=15&t=k&output=embed`,_0x38.appendChild(_0x39),_0x33.appendChild(_0x38),_0x34.style.flex="1",_0x33.style.display="flex",_0x32.textContent="Hide Map",_0x35=!0}else{const _0x3A=document.getElementById("modalMapContainer");_0x3A&&_0x33.removeChild(_0x3A),_0x34.style.flex="1",_0x32.textContent="Map",_0x35=!1}}));}if(_0x25){_0x25.addEventListener("hidden.bs.modal",()=>{const _0x3B=document.getElementById("modalMapContainer");_0x3B&&_0x33.removeChild(_0x3B),_0x34.style.flex="1",_0x32.textContent="Map",_0x35=!1});}function _0x3C(_0x3D,_0x3E){return function(..._0x3F){clearTimeout(_0x10),_0x10=setTimeout(()=>_0x3D.apply(this,_0x3F),_0xa);};}function _0x40(_0x41){return _0x41*Math.PI/180;}function _0x42(_0x43,_0x44){if(!(_0x43&&_0x44))return!1;const _0x45=_0x43.Location||"",_0x46=_0x45.split("@"),_0x47=_0x46.length>1?_0x46[0].trim():_0x45,_0x48=_0x43.Views[0].Url||"",_0x49=new RegExp(_0x48.replace(/[-\s]/g,"[-\\s]*"),"i");if(!_0x49.test(_0x47))return!1;const _0x4A=_0x45.match(/(?:MP|Milepost)\s*([\d.]+)/i);if(!_0x4A)return!1;const _0x4B=parseFloat(_0x4A[1]);return _0x43.mpMin!==undefined&&_0x4B<_0x43.mpMin? !1: _0x43.mpMax!==undefined&&_0x4B>_0x43.mpMax? !1: !0;}function _0x4C(_0x4D,_0x4E,_0x4F,_0x50){const _0x51=6371,_0x52=_0x40(_0x4F-_0x4D),_0x53=_0x40(_0x50-_0x4E),_0x54=Math.sin(_0x52/2)**2+Math.cos(_0x40(_0x4D))*Math.cos(_0x40(_0x4F))*Math.sin(_0x53/2)**2,_0x55=2*Math.atan2(Math.sqrt(_0x54),Math.sqrt(1-_0x54));return _0x51*_0x55;}function _0x17(_0x56){_0x24.innerHTML="";_0x56.forEach((_0x57,_0x58)=>{const _0x59=document.createElement("div");_0x59.classList.add("col");const _0x5A=document.createElement("div");_0x5A.classList.add("aspect-ratio-box");const _0x5B=document.createElement("a");_0x5B.href="#",_0x5B.setAttribute("data-bs-toggle","modal"),_0x5B.setAttribute("data-bs-target","#imageModal"),_0x5B.addEventListener("click",e=>{e.preventDefault(),_0x4D(_0x58);});const _0x5C=document.createElement("img");_0x5C.setAttribute("loading","lazy"),_0x5C.src=_0x57.Views[0].Url,_0x5C.alt=`Camera at ${_0x57.Location}`,_0x5B.appendChild(_0x5C),_0x5A.appendChild(_0x5B),_0x59.appendChild(_0x5A),_0x24.appendChild(_0x59);});}function _0x18(){_0x28.innerHTML=`${_0xe.length}`;}function _0x4D(_0x5D){const _0x5E=document.querySelector(".aspect-ratio-box.selected");_0x5E&&_0x5E.classList.remove("selected"),_0xf=_0x5D;const _0x5F=_0xe[_0x5D];_0x26.src=_0x5F.Views[0].Url,_0x27.textContent=_0x5F.Location,_0x26.dataset.latitude=_0x5F.Latitude,_0x26.dataset.longitude=_0x5F.Longitude;const _0x60=_0x24.children[_0x5D].querySelector(".aspect-ratio-box");_0x60&&_0x60.classList.add("selected");}document.addEventListener("DOMContentLoaded",()=>{_0x15(),setupNearestCameraButton(),setupRefreshButton(),localStorage.getItem("locationAllowed")==="true"?autoSortByLocation():navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(_0x61=>{_0x61.state==="granted"&&autoSortByLocation();});const _0x62=document.getElementById("splashScreen");if(_0x62){const _0x63=_0x62.querySelectorAll("video");_0x63.forEach(_0x64=>{_0x64.addEventListener("playing",()=>{setTimeout(_0x22,2300);});});}setTimeout(()=>{_0x62&&_0x62.style.display!=="none"&&_0x22();},4500);}),_0x29&&_0x29.addEventListener("input",_0x3C(e=>{searchQuery=e.target.value,filterImages();}));

})();
